<div ng-init="init()">
    <div class="page-header">
        <h1>{{league.name}}</h1>
    </div>
    <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="false">
        <div class="panel panel-default" ng-repeat="round in rounds">
            <div class="panel-heading" style="background-color: mediumseagreen; font-weight:bold;" role="tab" id="headingOne{{round.roundId}}">
                <div class="row">
                    <div>
                        <h4 class="panel-title" data-toggle="collapse" data-target="#collapseOne{{round.roundId}}" aria-expanded="false" data-parent="#accordion">
                            {{round.whichLeagueRound}} KOLEJKA | {{claculateTime(round.roundDate) | date: 'EEEE, MMMM M, yyyy'}}
                        </h4>
                    </div>
                    <div><button type="button" ng-click="setNewMatchSettings(round)" data-toggle="modal" data-target="#matchModal" class="btn btn-success btn-xs" aria-label="Left Align">
                    <span class="glyphicon glyphicon-plus" data-toggle="tooltip" data-placement="top" title="Dodaj mecz" aria-hidden="true"></span></button></div>
                </div>
            </div>
            <div id="collapseOne{{round.roundId}}" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne{{round.roundId}}">
                <div class="panel-body ">
                    <!-- LISTA MECZÓW -->
                    <table class="table" ng-repeat="match in leagueMatches | filter : {roundId: round.roundId}">
                        <tbody>
                            <tr>
                                <td style="text-align:center">
                                    <label class="label label-default hidden-xs" data-toggle="tooltip" data-placement="top" title="Godzina meczu">{{claculateTime(match.matchDate) | date: 'HH:mm'}}</label>
                                </td>
                                <td style="text-align:center">
                                    <div data-toggle="tooltip" style="background-color:gray; height:40px; width:40px; border-radius:10px;
                                    " data-placement="top" ng-attr-title="{{match.homeTeamName}}">
                                        <img ng-src="{{match.homeTeamLogoUrl}}" width="40px" height="40px" data-toggle="tooltip" data-placement="top" title="{{match.homeTeamName}}">
                                    </div>
                                </td>
                                <td style="text-align:center">
                                    <div style="color: black;">
                                        <div class="row"><label>{{match.homeFirstPlayerAlias}}</label></div>
                                        <div class="row"><label>{{match.homeSecondPlayerAlias}}</label></div>
                                    </div>
                                </td>
                                <!-- <td>
                                    <button class="hidden-xs btn btn-default">{{match.homeTeamName}}</button>
                                </td> -->
                                <td style="text-align:center">
                                    <button type="button" style="width:60px; height:45px; font-size:20px; text-align:center" class="btn btn-warning" data-toggle="modal" data-target="#myModal" ng-click="setEditContext(match)" data-toggle="tooltip" data-placement="top" title="Edytuj wynik">{{match.homeGoals}}:{{match.awayGoals}}</button>
                                </td>
                                <!-- <td>
                                    <button class="hidden-xs btn btn-default">{{match.awayTeamName}}</button>
                                </td> -->
                                <td style="text-align:center">
                                    <div style="color: black;">
                                        <div class="row"><label>{{match.awayFirstPlayerAlias}}</label></div>
                                        <div class="row"><label>{{match.awaySecondPlayerAlias}}</label></div>
                                    </div>
                                </td>
                                <td style="text-align:center">
                                    <div data-toggle="tooltip" style="background-color:gray; height:40px; width:40px; border-radius:10px;
                                    " data-placement="top" ng-attr-title="{{match.awayTeamName}}">
                                        <img ng-src="{{match.awayTeamLogoUrl}}" width="40px" height="40px" data-toggle="tooltip" data-placement="top" title="{{match.awayTeamName}}">
                                    </div>
                                </td>
                                <td style="text-align:right">
                                    <div>
                                        <div class="row"><button type="button" class="btn btn-default btn-xs" aria-label="Left Align">
  <span class="glyphicon glyphicon-edit glyphicon-align-left" aria-hidden="true"></span></button></div>
                                        <div class="row"><button type="button" class="btn btn-danger btn-xs" aria-label="Left Align">
  <span class="glyphicon glyphicon-remove" aria-hidden="true"></span></button></div>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- MODALNE OKNO EDYCJI WYNIKU -->
    <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">

            <!-- Modal content-->
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">{{claculateTime(matchEdited.matchDate) | date: 'EEEE, MMMM M, yyyy - HH:mm'}} </h4>
                </div>
                <table class="table table-striped table-dark">
                    <tbody>
                        <tr class="matchRow">
                            <td style="text-align:center">
                                <div data-toggle="tooltip" style="background-color:gray; height:40px; width:40px; border-radius:10px;
                                " data-placement="top" ng-attr-title="{{matchEdited.homeTeamName}}">
                                    <img ng-src="{{matchEdited.homeTeamLogoUrl}}" width="40px" height="40px" data-toggle="tooltip" data-placement="top" title="{{matchEdited.homeTeamName}}">
                                </div>
                            </td>
                            <td style="text-align:center">
                                <div style="color: black;">
                                    <div class="row"><label>{{matchEdited.homeFirstPlayerAlias}}</label></div>
                                    <div class="row"><label>{{matchEdited.homeSecondPlayerAlias}}</label></div>
                                </div>
                            </td>
                            <td style="text-align:center">
                                <td>
                                    <input type="text" style="width:50px; font-size:20px; text-align:center; font-weight:bold" class="form-control col-sm-1" ng-model="matchEdited.homeGoals" id="homeGoals">

                                </td>
                                <td>
                                    <input type="text" style="width:50px; font-size:20px; text-align:center; font-weight:bold" class="form-control col-sm-1" ng-model="matchEdited.awayGoals" id="awayGoals">
                                </td>
                            </td>
                            <td style="text-align:center">
                                <div style="color: black;">
                                    <div class="row"><label>{{matchEdited.awayFirstPlayerAlias}}</label></div>
                                    <div class="row"><label>{{matchEdited.awaySecondPlayerAlias}}</label></div>
                                </div>
                            </td>
                            <td style="text-align:center">
                                <div data-toggle="tooltip" style="background-color:gray; height:40px; width:40px; border-radius:10px;
                                " data-placement="top" ng-attr-title="{{matchEdited.awayTeamName}}">
                                    <img ng-src="{{matchEdited.awayTeamLogoUrl}}" width="40px" height="40px" data-toggle="tooltip" data-placement="top" title="{{matchEdited.awayTeamName}}">
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>

                <div class="modal-footer">
                    <button type="button" class="btn btn-success" ng-click="editMatch()" data-dismiss="modal">EDYTUJ</button>
                </div>
            </div>

        </div>
    </div>


    <!-- MODAL - DODAWANIE MECZU -->
    <div class="modal fade" id="matchModal" tabindex="-1" role="dialog" aria-labelledby="matchModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="matchModalLabel">DODAJ MECZ</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
                </div>

                <div class="modal-body">

                    <!-- Create Match form -->
                    <form novalidate name="newMatchForm">
                        <div class=form-row>
                            <div class="form-group col-md-6" ng-class="{'has-error': newMatchForm.leagueName.$invalid}">
                                <label for="leagueName">Nazwa Ligi</label>
                                <input type="text" class="form-control" name="leagueName" ng-model="league.name" id="leagueName" placeholder="Nazwa Ligi" required ng-minlength="4" ng-maxlength="25">
                                <small class="error" ng-show="newMatchForm.leagueName.$error.required">Nazwa ligi jest wymagana</small>
                                <small class="error" ng-show="newMatchForm.leagueName.$error.minlength">Zbyt krótka nazwa - min. 3 znaki</small>
                                <small class="error" ng-show="newMatchForm.leagueName.$error.maxlength">Zbyt długa nazwa</small>
                            </div>
                            <table class="table">
                                <tbody>
                                    <tr>
                                        <td>
                                        </td>
                                        <td style="text-align:center">
                                            <div class="col"><label>GOSPODARZE</label></div>
                                            <div class="col">
                                                <select class="selectpicker form-control" data-live-search="true" data-live-search="true" ng-model="newMatch.homeFirstPlayerId" ng-options="player.playerId as player.alias for player in players"></select>                                                {{newMatch.homeFirstPlayerId}}

                                                <select class="selectpicker form-control" data-live-search="true" data-live-search="true" ng-model="newMatch.homeSecondPlayerId" ng-options="player.playerId as player.alias for player in players"></select>                                                {{newMatch.homeSecondPlayerId}}

                                                <select class="selectpicker form-control" data-live-search="true" data-live-search="true" ng-model="newMatch.homeTeamId" ng-options="team.teamId as team.name for team in teams"></select> {{newMatch.homeTeamId}}

                                            </div>
                                        </td>
                                        <td>

                                        </td>
                                        <td style="text-align:center">
                                            <div class="col"><label>GOŚCIE</label></div>
                                            <div class="col">
                                                <select class="selectpicker form-control" data-live-search="true" data-live-search="true" ng-model="newMatch.awayFirstPlayerId" ng-options="player.playerId as player.alias for player in players"></select>                                                {{newMatch.awayFirstPlayerId}}

                                                <select class="selectpicker form-control" data-live-search="true" data-live-search="true" ng-model="newMatch.awaySecondPlayerId" ng-options="player.playerId as player.alias for player in players"></select>                                                {{newMatch.awaySecondPlayerId}}

                                                <select class="selectpicker form-control" data-live-search="true" data-live-search="true" ng-model="newMatch.awayTeamId" ng-options="team.teamId as team.name for team in teams">
                                                    <option value="">--WYBIERZ DRUŻYNĘ--</option>
                                                </select> {{newMatch.awayTeamId}}

                                            </div>
                                        </td>
                                        <td></td>
                                    </tr>
                                </tbody>
                            </table>

                            <div class="form-group col-md-12">
                                <label for="comment" class="col-form-label">Komentarz meczowy</label>
                                <textarea class="form-control" ng-model="newMatch.comment" id="comment" placeholder="Dodaj komentarz"></textarea>
                            </div>
                        </div>
                        <div class="form-group text-right">
                            <button type="button" class="btn btn-secondary" data-dismiss="modal">Zamknij</button>
                            <button type="reset" class="btn btn-info" id="reset-btn" ng-click="reset()">Wyczyść</button>
                            <button type="submit" class="btn btn-primary" ng-click="addMatch(newMatch.homeFirstPlayerId,newMatch.homeSecondPlayerId,newMatch.awayFirstPlayerId,newMatch.awaySecondPlayerId,newMatch.homeGoals,newMatch.awayGoals,newMatch.homeTeamId,newMatch.awayTeamId,newMatch.comment,activeRound.roundId,activeRound.leagueId)"
                                data-dismiss="modal" ng-disabled="newMatchForm.$invalid">Dodaj mecz</button>
                        </div>
                    </form>

                </div>
                <div class="modal-footer">

                </div>
            </div>
        </div>
    </div>


</div>